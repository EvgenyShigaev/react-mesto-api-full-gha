{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Evgeny/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Evgeny/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from'./ImagePopup';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{api}from'../utils/Api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isImagePopupOpen=_useState2[0],setIsImagePopupOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cards=_useState4[0],setCards=_useState4[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),currentUser=_useState6[0],setCurrentUser=_useState6[1];useEffect(function(){Promise.all([api.getInitialCards(),api.getUserData()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),initialCards=_ref2[0],user=_ref2[1];setCards(initialCards);setCurrentUser(user);}).catch(function(err){return alert(err);});},[]);function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsImagePopupOpen(false);}function handleCardClick(card){setSelectedCard(card);setIsImagePopupOpen(true);}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(err){return alert(err);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return alert(err);});}function handleUpdateUser(value){api.editUserInfo(value).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return alert(err);});}function handleUpdateAvatar(value){api.editUserAvatar(value).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return alert(err);});}function handleAddPlaceSubmit(card){api.addCard(card).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return alert(err);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete,onUpdateUser:handleUpdateUser,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,isOpen:Boolean(isImagePopupOpen),onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","CurrentUserContext","api","jsx","_jsx","jsxs","_jsxs","App","_React$useState","_React$useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState3","_React$useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_useState","_useState2","isImagePopupOpen","setIsImagePopupOpen","_useState3","_useState4","cards","setCards","_React$useState7","_React$useState8","selectedCard","setSelectedCard","_useState5","_useState6","currentUser","setCurrentUser","Promise","all","getInitialCards","getUserData","then","_ref","_ref2","initialCards","user","catch","err","alert","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","closeAllPopups","handleCardClick","card","handleCardDelete","deleteCard","_id","state","filter","c","handleCardLike","isLiked","likes","some","i","changeLikeCardStatus","newCard","map","handleUpdateUser","value","editUserInfo","res","handleUpdateAvatar","editUserAvatar","handleAddPlaceSubmit","addCard","concat","_toConsumableArray","Provider","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","onCardDelete","onUpdateUser","isOpen","onClose","onUpdateAvatar","Boolean"],"sources":["C:/Users/Evgeny/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { api } from '../utils/Api';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = useState({});\n\n  useEffect(() => {\n    Promise.all([api.getInitialCards(), api.getUserData()])\n      .then(([initialCards, user]) => {\n        setCards(initialCards);\n        setCurrentUser(user);\n      })\n      .catch((err) => alert(err));\n  }, []);\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => alert(err));\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => alert(err));\n  }\n\n  function handleUpdateUser(value) { \n    api \n      .editUserInfo(value) \n      .then((res) => { \n        setCurrentUser(res); \n        closeAllPopups(); \n      }) \n      .catch((err) => alert(err)); \n  } \n\n  function handleUpdateAvatar(value) {\n    api\n      .editUserAvatar(value)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => alert(err));\n  }\n\n  function handleAddPlaceSubmit(card) { \n    api \n      .addCard(card) \n      .then((newCard) => { \n        setCards([newCard, ...cards]); \n        closeAllPopups(); \n      }) \n      .catch((err) => alert(err)); \n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          onUpdateUser={handleUpdateUser}\n          cards={cards}\n        />\n\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          isOpen={Boolean(isImagePopupOpen)}\n          onClose={closeAllPopups}\n        ></ImagePopup>\n\n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}